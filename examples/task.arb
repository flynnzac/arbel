' Demonstrate tasks

task /t1
     (
       while ( answer True . )
             (
               queue /current [ accept /hello . ] .
             ) .
     )
     [ registry . ] .

run-task t1 .

queue /hello "Hi!" t1 .
accept /current t1 .


queue t1 /hello "Bye!" .
queue t1 /hello 1342 .
queue t1 /hello ( add 1 2 . ) .

task /t2
     (
       set /continue True .
       while ( answer continue . )
             (
               select 
                      /double
                      (
                        print [ mul ans 2 . ] .
                      )
                      /triple
                      (
                        print [ mul ans 3 . ] .
                      )
                      /end
                      (
                        set /continue False .
                      ) .
             ) .
     )
     [ registry . ] .

run-task t2 .
queue t2 /double 3 .
queue t2 /triple 10 .
queue t2 /double 7 .
queue t2 /end .
