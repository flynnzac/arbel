rem Tokenize a string $#1 by splitting on string $#2
set $tokenize
(
  mov $#1 $word .
  mov $#2 $sep .
  set $i 1 .
  set $len [ count-characters \word . ] .
  set $cur-reg $#1 .
  set $tokened [ list . ] .
  set $init 1 .
  while ( lteq i len . )
  (
    set $c [ character \word i . ] .
    if [ string-eq c \sep . ]
    {
      in \tokened ( set cur-reg buffer . ) .
      set $cur-reg [ next cur-reg . ] .
      set $init 1 .
    }
    {
      if [ eq init 1 . ] { set $buffer c . set $init 0 . }
         { set $buffer [ concat buffer c . ] . } .
    } .
    set $i [ add i 1 . ] .
  ) .
  in \tokened ( set cur-reg buffer . ) .
  answer \tokened .
)  .

