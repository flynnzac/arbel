<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-08-12 Wed 13:13 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ARBEL</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Zach Flynn" />
<meta name="description" content="ARBEL is a registry-based environment and language."
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
ARBEL<br>Zach Flynn<br>2020-08-12 Wed 13:13
</div>
<div id="content">
<h1 class="title">ARBEL</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgde955a5">1. Code inside Data</a></li>
<li><a href="#org8e21b8a">2. Syntax</a>
<ul>
<li><a href="#org03111cf">2.1. Literals and Names</a>
<ul>
<li><a href="#orgc7e0372">2.1.1. Numeric Literals</a></li>
<li><a href="#org01daa58">2.1.2. String Literals</a></li>
<li><a href="#org5a8a03a">2.1.3. Boolean Literals</a></li>
<li><a href="#org1b44b64">2.1.4. Register Literals</a></li>
<li><a href="#orgee8934c">2.1.5. Instruction Literals</a></li>
<li><a href="#org4480a59">2.1.6. Operator Literals</a></li>
<li><a href="#org8296d00">2.1.7. The Nothing Literal</a></li>
</ul>
</li>
<li><a href="#org8b09bf2">2.2. Substatements</a>
<ul>
<li><a href="#org2434fb3">2.2.1. Immediate Substatements</a></li>
<li><a href="#org987f350">2.2.2. Active Instructions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org55a52cc">3. Overview of ARBEL vocabulary</a></li>
<li><a href="#org5a5a5d4">4. Registries</a>
<ul>
<li><a href="#org4fa3346">4.1. Registries as data structures</a></li>
<li><a href="#org433b25d">4.2. Registries as environments</a></li>
</ul>
</li>
<li><a href="#orgf484223">5. Registers</a></li>
<li><a href="#orga51d00d">6. Instructions</a>
<ul>
<li><a href="#org82f8319">6.1. Defining operations</a></li>
</ul>
</li>
<li><a href="#orga6234aa">7. Booleans and Control Flow</a></li>
<li><a href="#org09e8301">8. Numbers</a></li>
<li><a href="#orgd662040">9. Strings</a></li>
<li><a href="#orgb929db8">10. Tasks (multi-threading)</a></li>
<li><a href="#orgfd266dc">11. Examples</a>
<ul>
<li><a href="#org5e04e0d">11.1. Short Examples</a></li>
<li><a href="#orgff06346">11.2. Complete Program</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgde955a5" class="outline-2">
<h2 id="orgde955a5"><span class="section-number-2">1</span> Code inside Data</h2>
<div class="outline-text-2" id="text-1">
<p>
ARBEL code is executed inside a data set called a registry.  Registries are tables with values entered in <i>registers</i>. The programmer enters commands to modify the contents of the registry and possibly send the results of any computations performed on the data to another registry.
</p>

<p>
Code in ARBEL has no context or scope of its own.  It requires a registry to give it context.  For example,
</p>
<div class="org-src-container">
<pre class="src src-arbel">... print x .
</pre>
</div>

<p>
requires that the registry contains data located at the <code>print</code> and <code>x</code> register.  Different registries could contain different values at these locations so the same code might perform different actions in different contexts.  
</p>
</div>
</div>

<div id="outline-container-org8e21b8a" class="outline-2">
<h2 id="org8e21b8a"><span class="section-number-2">2</span> Syntax</h2>
<div class="outline-text-2" id="text-2">
<p>
ARBEL code consists of a number of statements.  Each statement contains a series of data values, either literals or values located in the current registry, separated by whitespace and ending with a period.  All elements of a statement must be separated by whitespace from the preceding element, including the terminating period.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... data1 data2 data3 data4 .
</pre>
</div>

<p>
The following are examples of statements:
</p>
<div class="org-src-container">
<pre class="src src-arbel">... add 1 2 .
ans = 3
... print <span style="color: #4E9A06;">"Hello"</span> .
Hello
</pre>
</div>

<p>
The first element of a statement is an operation that performs some transformation of the other data elements in the statement and the contents of the registry in which the statement is executed.  The first statement uses the operation located at the <code>add</code> register.  The second uses the operation located at the <code>add</code> register.  The numbers and the the string <code>"Hello"</code> are literals.
</p>
</div>

<div id="outline-container-org03111cf" class="outline-3">
<h3 id="org03111cf"><span class="section-number-3">2.1</span> Literals and Names</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Names are sequences of characters that are not literals and not parenthesis (<code>()</code>, <code>[]</code>, <code>{}</code>, <code>&lt;&gt;</code>).  A name appearing in a statement indicates the value located at the register with that name.
</p>

<p>
Literals represent a value of data.
</p>
</div>

<div id="outline-container-orgc7e0372" class="outline-4">
<h4 id="orgc7e0372"><span class="section-number-4">2.1.1</span> Numeric Literals</h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
Numbers are a sequence of digits either with or without a decimal point.  With a decimal point, the type of the literal is a Real.  Without a decimal point, the type of the literal is an Integer. Example: <code>123</code> and <code>1.23</code>.
</p>
</div>
</div>

<div id="outline-container-org01daa58" class="outline-4">
<h4 id="org01daa58"><span class="section-number-4">2.1.2</span> String Literals</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
Strings are a sequence of characters enclosed by double quotes (<code>""</code>). Example: <code>"Hello, world."</code>.  
</p>
</div>
</div>

<div id="outline-container-org5a8a03a" class="outline-4">
<h4 id="org5a8a03a"><span class="section-number-4">2.1.3</span> Boolean Literals</h4>
<div class="outline-text-4" id="text-2-1-3">
<p>
Boolean literals are one of two words: <code>True</code> and <code>False</code> (case sensitive).  
</p>
</div>
</div>

<div id="outline-container-org1b44b64" class="outline-4">
<h4 id="org1b44b64"><span class="section-number-4">2.1.4</span> Register Literals</h4>
<div class="outline-text-4" id="text-2-1-4">
<p>
A register location is a name preceeded by a forward slash <code>/</code>.  Example: <code>/hello</code>, <code>/x1</code>.  These literals refer to the register location, not its value.  Almost any string of characters is a valid register location, but some will be less convenient to access because they collide with other elements of ARBEL's syntax.  But they can still be used.  For example,
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/.</span> 1 .
... get <span style="color: #0084C8; font-weight: bold;">/.</span> .
ans = 1
</pre>
</div>

<p>
Can be used to access the value when the register's value cannot be accessed in the usual way, by omitting the forward slash.
</p>
</div>
</div>

<div id="outline-container-orgee8934c" class="outline-4">
<h4 id="orgee8934c"><span class="section-number-4">2.1.5</span> Instruction Literals</h4>
<div class="outline-text-4" id="text-2-1-5">
<p>
Instructions are ARBEL statements enclosed in open parenthesis.  Instructions are code that is not executed but saved as data to be used in another environment.  Example: <code>( add t 2 . mul ans 5 . )</code> which is an instruction to add <code>2</code> to the value at a register <code>/t</code> and multiply the answer by <code>5</code>. This code is not executed and resolves to a type of data called an Instruction.  It is treated as a literal value.  The whitespace following the first parenthesis and preceeding the last is required.
</p>
</div>
</div>

<div id="outline-container-org4480a59" class="outline-4">
<h4 id="org4480a59"><span class="section-number-4">2.1.6</span> Operator Literals</h4>
<div class="outline-text-4" id="text-2-1-6">
<p>
Operations are like instructions except that they are less flexible because they must be called in a certain way with fixed positional arguments.  Operation literals are enclosed in angle brackets (<code>&lt;&gt;</code>) like so: <code>&lt; ( add t 1 . ) /t &gt;</code>.  The first element inside the angle brackets is an instruction.  The rest of the arguments are registers which give the data locations to bind the operator's arguments to when called so that: <code>&lt; ( add t 1 . ) /t &gt; 10 .</code> would give <code>11</code>.  These values are treated as literals of the Operation type.
</p>
</div>
</div>

<div id="outline-container-org8296d00" class="outline-4">
<h4 id="org8296d00"><span class="section-number-4">2.1.7</span> The Nothing Literal</h4>
<div class="outline-text-4" id="text-2-1-7">
<p>
The word <code>Nothing</code> is a literal value of type <code>Nothing</code>.  <code>Nothing</code> is not like other data types.  That is the most important thing about it.  It can be used as the return value for errors and other situations.
</p>
</div>
</div>
</div>

<div id="outline-container-org8b09bf2" class="outline-3">
<h3 id="org8b09bf2"><span class="section-number-3">2.2</span> Substatements</h3>
<div class="outline-text-3" id="text-2-2">
<p>
ARBEL statements can contain two forms of substatements in place of a data element.  The substatements differ by when the code they contain is executed.  
</p>
</div>

<div id="outline-container-org2434fb3" class="outline-4">
<h4 id="org2434fb3"><span class="section-number-4">2.2.1</span> Immediate Substatements</h4>
<div class="outline-text-4" id="text-2-2-1">
<p>
Immediate substatements are executed as soon as they are encountered.  They evaluate to the value of the <code>ans</code> register in the registry where the code is executed after the substatement is executed. They are enclosed in square brackets.
</p>

<div class="org-src-container">
<pre class="src src-arbel">... add [ sub 5 3 . ] 10 .
ans = 12
</pre>
</div>

<p>
<code>sub</code> is the usual location of the subtraction operator.  The bracketed substatement is evaluated and replaced with the value of the <code>ans</code> register after <code>sub 5 3 .</code> is executed.   The subtraction and other arithmetic operations set the <code>ans</code> register to their result.  So <code>2</code> is the first data element in the outer statement.  <code>add</code> then adds <code>2</code> and <code>10</code> setting the <code>ans</code> register to <code>12</code>.
</p>
</div>
</div>

<div id="outline-container-org987f350" class="outline-4">
<h4 id="org987f350"><span class="section-number-4">2.2.2</span> Active Instructions</h4>
<div class="outline-text-4" id="text-2-2-2">
<p>
Active instructions are executed <i>when they are used</i>.  They are usually used in conditional operations so that code is not executed unless it is required.  They are enclosed in curly braces.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... if <span style="color: #F5666D;">True</span> { print <span style="color: #4E9A06;">"hello"</span> . } { print <span style="color: #4E9A06;">"goodbye"</span> . } .
hello
... if <span style="color: #F5666D;">False</span> { print <span style="color: #4E9A06;">"hello"</span> . } { print <span style="color: #4E9A06;">"goodbye"</span> . } .
goodbye
... if <span style="color: #F5666D;">True</span> [ print <span style="color: #4E9A06;">"hello"</span> . ] [ print <span style="color: #4E9A06;">"goodbye"</span> . ]
hello
goodbye
</pre>
</div>

<p>
This code block illustrates the difference between active instructions and immediate substatements.  The <code>if</code> operation accesses and returns its second argument if the first argument is <code>True</code> and the third argument if the first is <code>False</code>.  So, only the first active instruction is executed in the first line of code and only the second active instruction is executed in the second line.  The third line uses immediate substatements instead.  These are executed as soon as they are encountered regardless of whether the <code>if</code> operation accesses their value.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org55a52cc" class="outline-2">
<h2 id="org55a52cc"><span class="section-number-2">3</span> Overview of ARBEL vocabulary</h2>
<div class="outline-text-2" id="text-3">
<p>
ARBEL statements consist of sequences of data.  Statements start with an operation, generally, and other types of data follow.  ARBEL the language consists of operations that implement each data type.  Users of ARBEL do not specify new types unlike in many languages.  ARBEL uses a single flexible data structure, the registry, to describe many types.  Like lists in Lisp.
</p>
</div>
</div>

<div id="outline-container-org5a5a5d4" class="outline-2">
<h2 id="org5a5a5d4"><span class="section-number-2">4</span> Registries</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org4fa3346" class="outline-3">
<h3 id="org4fa3346"><span class="section-number-3">4.1</span> Registries as data structures</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Registries are tables of data located at registers.  Register locations are prefixed with a forward slash in ARBEL so:
</p>
<div class="org-src-container">
<pre class="src src-arbel"><span style="color: #0084C8; font-weight: bold;">/hello</span>
<span style="color: #0084C8; font-weight: bold;">/x</span>
<span style="color: #0084C8; font-weight: bold;">/z123</span>
</pre>
</div>

<p>
are all examples of register locations in ARBEL.  The value located at a registry is referenced by removing the forward slash.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/x</span> 10 .
... print x .
10
</pre>
</div>

<p>
The <code>set</code> operation assigns a value to a register. Values can also be retrieved from registries using the <code>get</code> operation:
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/x</span> 10 .
... get <span style="color: #0084C8; font-weight: bold;">/x</span> .
ans = 10
</pre>
</div>

<p>
The <code>move</code> operation moves values between registers without copying the underlying data.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/x</span> 10 .
... print x .
10
... move <span style="color: #0084C8; font-weight: bold;">/x</span> <span style="color: #0084C8; font-weight: bold;">/y</span> .
... print x .
Error: Value at register <span style="color: #0084C8; font-weight: bold;">/x</span> not found.
... print y .
10
</pre>
</div>

<p>
The <code>delete</code> operation deletes a value from a given register in the current registry.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/x</span> 10 .
... print x .
10
... delete <span style="color: #0084C8; font-weight: bold;">/x</span> .
... print x .
Error: Value not found at <span style="color: #0084C8; font-weight: bold;">/x</span> register.
</pre>
</div>

<p>
The <code>registry</code> operation creates a new registry.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... registry <span style="color: #0084C8; font-weight: bold;">/x</span> 10 .
ans = a registry with:
x of type Integer, value: 10
</pre>
</div>

<p>
The <code>registry</code> operation takes a series of register value pairs as input and creates a registry with each value stored at each register.  After a new registry is created, values can be set and retrieved from the registry using the <code>set</code> and <code>get</code> operation's optional final argument.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/r</span> [ registry <span style="color: #0084C8; font-weight: bold;">/x</span> 10 . ] .
... get <span style="color: #0084C8; font-weight: bold;">/x</span> r .
ans = 10
... set <span style="color: #0084C8; font-weight: bold;">/y</span> 4 r .
... get <span style="color: #0084C8; font-weight: bold;">/y</span> r .
ans = 4
</pre>
</div>

<p>
Values in other registries can also be accessed by using the colon syntax.  The value located at a certain register in another registry can be written as:
</p>
<div class="org-src-container">
<pre class="src src-arbel">registry:register
</pre>
</div>

<p>
For example,
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/r</span> [ registry <span style="color: #0084C8; font-weight: bold;">/x</span> 10 . ] .
... print r:<span style="color: #0084C8; font-weight: bold;">/x</span> .
10
... set <span style="color: #0084C8; font-weight: bold;">/y</span> <span style="color: #0084C8; font-weight: bold;">/x</span> .
... print r:y .
10
</pre>
</div>

<p>
This notation can be nested.  So a value in a registry located at a register inside another registry can be accessed with:
</p>
<div class="org-src-container">
<pre class="src src-arbel">registry:register:register
</pre>
</div>

<p>
Where the first register is the location of another registry inside the registry.  Like so,
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/r</span> [ registry <span style="color: #0084C8; font-weight: bold;">/s</span> [ registry <span style="color: #0084C8; font-weight: bold;">/x</span> 10 . ] . ] .
... print r:<span style="color: #0084C8; font-weight: bold;">/s:/x</span> .
10
</pre>
</div>

<p>
Elements of a registry can be selected using the <code>find</code> operation.  The find operation takes a registry and an operation as arguments.  The operation should take two arguments.  The first is a value in the registry.  The second is the register the value is located at in the registry.  If the element should be selected, the operation should set the <code>/ans</code> register to <code>True</code>.  If it should not be, the operation should set the <code>/ans</code> register to <code>False</code>.
</p>

<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/r</span> [ list 4 2 3 <span style="color: #4E9A06;">"hello"</span> . ] .
... print r .
ans = a registry with:
t1 of type Integer, value: 4
t2 of type Integer, value: 2
t3 of type Integer, value: 3
t4 of type String, value: <span style="color: #4E9A06;">"hello"</span>
... find r <span style="color: #00578E; font-weight: bold;">&lt;</span> ( is-integer value . ) <span style="color: #0084C8; font-weight: bold;">/value</span> <span style="color: #0084C8; font-weight: bold;">/key</span> <span style="color: #00578E; font-weight: bold;">&gt;</span> .
ans = a registry with:
t1 of type Integer, value: 4
t2 of type Integer, value: 2
t3 of type Integer, value: 3
</pre>
</div>

<p>
The <code>import</code> operation is used to take the objects from one registry and add them to another. 
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/r</span> [ registry <span style="color: #0084C8; font-weight: bold;">/x</span> 10 . ] .
... print x .
Error: Value not found at register <span style="color: #0084C8; font-weight: bold;">/x.</span>
... import r .
... print x .
10
</pre>
</div>

<p>
<code>exist</code> checks whether a value is located in a registry.  It sets the <code>/ans</code> register to <code>True</code> if it is and to <code>False</code> if it does not.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/x</span> 10 .
... exist <span style="color: #0084C8; font-weight: bold;">/x</span> .
ans = <span style="color: #F5666D;">True</span>
... delete <span style="color: #0084C8; font-weight: bold;">/x</span> .
... exist <span style="color: #0084C8; font-weight: bold;">/x</span> .
ans = <span style="color: #F5666D;">False</span>
... set <span style="color: #0084C8; font-weight: bold;">/r</span> [ registry <span style="color: #0084C8; font-weight: bold;">/z</span> 50 . ] .
... exist <span style="color: #0084C8; font-weight: bold;">/z</span> r .
ans = <span style="color: #F5666D;">True</span>
... exist <span style="color: #0084C8; font-weight: bold;">/z</span> .
ans = <span style="color: #F5666D;">False</span> 
</pre>
</div>
</div>
</div>

<div id="outline-container-org433b25d" class="outline-3">
<h3 id="org433b25d"><span class="section-number-3">4.2</span> Registries as environments</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Registries are both a data structure as described above, and an environment in which code is executed.  To change which registry code is being executed in, use the <code>go-in</code> operation to change the current registry to another registry.  Use the <code>go-out</code> operation to move up to the previous registry.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... <span style="color: #0084C8; font-weight: bold;">/set</span> <span style="color: #0084C8; font-weight: bold;">/r</span> [ registry . ] .
... go-in r .
... set <span style="color: #0084C8; font-weight: bold;">/x</span> 10 .
... print x .
10
... go-out .
... print x .
Error: Value not found at <span style="color: #0084C8; font-weight: bold;">/x</span> register.
... print r:<span style="color: #0084C8; font-weight: bold;">/x</span> .
10
</pre>
</div>


<p>
An instruction can also be executed in a registry using the <code>in</code> operation.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/r</span> [ registry <span style="color: #0084C8; font-weight: bold;">/t</span> 1 . ] .
... print r:<span style="color: #0084C8; font-weight: bold;">/t</span> .
1
... in r ( move <span style="color: #0084C8; font-weight: bold;">/t</span> <span style="color: #0084C8; font-weight: bold;">/s</span> . ) .
... print r:<span style="color: #0084C8; font-weight: bold;">/s</span> .
1
... print s .
Error: No value found at register <span style="color: #0084C8; font-weight: bold;">/s.</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf484223" class="outline-2">
<h2 id="orgf484223"><span class="section-number-2">5</span> Registers</h2>
<div class="outline-text-2" id="text-5">
<p>
Registers are a full-fledged data type.  Register locations can be inserted into a registry.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/x</span> <span style="color: #0084C8; font-weight: bold;">/y</span> .
... set x 10 .
... print x .
<span style="color: #0084C8; font-weight: bold;">/y</span>
... print y .
10
</pre>
</div>

<p>
Registries with an array-like structure often have registers with names like: <code>/r1,/r2,/r3</code>.  ARBEL has convenience operations to work with registers like these.
</p>

<p>
<code>list</code> creates registries where each element is at register location <code>/t1,/t2,/t3,...</code>.  
</p>
<div class="org-src-container">
<pre class="src src-arbel">... list 1 2 3 .
ans = a registry with:
t1 of type Integer, value: 1
t2 of type Integer, value: 2
t3 of type Integer, value: 3
</pre>
</div>

<p>
<code>next</code> and <code>previous</code> set the <code>/ans</code> register to the next or previous register for registers that end in numeric values.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... next <span style="color: #0084C8; font-weight: bold;">/element10</span> .
ans = <span style="color: #0084C8; font-weight: bold;">/element11</span>
... previous <span style="color: #0084C8; font-weight: bold;">/element10</span> .
ans = <span style="color: #0084C8; font-weight: bold;">/element9</span>
</pre>
</div>
</div>
</div>



<div id="outline-container-orga51d00d" class="outline-2">
<h2 id="orga51d00d"><span class="section-number-2">6</span> Instructions</h2>
<div class="outline-text-2" id="text-6">
<p>
Instructions are code literals.  In syntax, they are statements enclosed in open parenthesis. Instructions can be executed with either the <code>in</code> or the <code>call</code> operations and they are often used as arguments for various operations like loops.  
</p>

<p>
The <code>in</code> operation executes the instruction inside an existing registry.
</p>

<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/assign-x</span> ( set <span style="color: #0084C8; font-weight: bold;">/x</span> 10 . ) .
... set <span style="color: #0084C8; font-weight: bold;">/y</span> [ registry . ] .
... in y assign-x .
... print x .
Error: Value at register <span style="color: #0084C8; font-weight: bold;">/x</span> not found.
... in _ assign-x .
... print x .
10
</pre>
</div>

<p>
This example demonstrates both using instructions and how ARBEL code executes inside registries.  The <code>registry</code> operation creates a new registry.  The statement <code>in y assign-x</code> executes the code in the instruction located at <code>/assign-x</code> in the context of the <code>y</code> register.  So, within the <code>y</code> registry, the value located at <code>/x</code> is <code>10</code>.  But, because we are currently not inside the <code>/y</code> registry, after the <code>in</code> command we cannot access those registries so <code>print x</code> prints nothing.  The special name <code>_</code> refers to the current registry.  So <code>in _ assign-x</code> runs the instruction <code>assign-x</code> in the current registry.  So <code>/x</code> in the current registry now holds the value <code>10</code>.
</p>

<p>
The <code>call</code> operation executes the instruction inside a temporary registry defined by the user calling the code.  It then sets the <code>/ans</code> register in the calling registry to the value of the <code>/ans</code> register in the temporary registry.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/add-one</span> ( add t 1 . ) .
... call add-one <span style="color: #0084C8; font-weight: bold;">/t</span> 10 .
ans = 11
</pre>
</div>

<p>
The <code>call</code> operations takes an instruction and then alternating register value pairs as arguments.  The register value pairs define the state of the temporary registry when the code is run.  Because the caller of the code defines the state of the registry, any non-literal can be modified by the caller.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/add-one</span> ( add t 1 . ) .
... call add-one <span style="color: #0084C8; font-weight: bold;">/t</span> 10 .
ans = 11
... call add-one <span style="color: #0084C8; font-weight: bold;">/t</span> 10 <span style="color: #0084C8; font-weight: bold;">/add</span> sub .
ans = 9
</pre>
</div>

<p>
The second line typically located at the register <code>/add</code> (the <code>add</code> operation) with the operation located at the register <code>/sub</code> (the <code>sub</code> operation).  But it only makes this replacement in the temporary registry.  The registry calling the code is unaffected by this change.  So <code>call add-one /t 10 /add sub</code> subtracts <code>1</code> from <code>10</code> instead of adds.
</p>

<p>
The main difference between the <code>in</code> and <code>call</code> operation is that the <code>call</code> operation moves the value of <code>/ans</code> in the temporary registry it creates back to the calling registry.  The <code>in</code> operation is typically used for modifying registries and the <code>call</code> operation is typically used for computations.
</p>

<p>
As a convenience, if an instruction is the first data object in a statement, ARBEL assumes that you want to <code>call</code> it.  It operates exactly the same as if you had included the <code>call</code> operation itself.
</p>
<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/add-one</span> ( add t 1 . ) .
... add-one <span style="color: #0084C8; font-weight: bold;">/t</span> 10
ans = 10
</pre>
</div>
</div>

<div id="outline-container-org82f8319" class="outline-3">
<h3 id="org82f8319"><span class="section-number-3">6.1</span> Defining operations</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Most new procedures that a programmer writes in ARBEL are instructions, but it is sometimes useful to have "positional" arguments like operations.  Users write operations by writing instructions and assigning argument numbers to different registers in the temporary registry. They can be defined using angle brackets or the <code>op</code> operation.
</p>

<div class="org-src-container">
<pre class="src src-arbel">... set <span style="color: #0084C8; font-weight: bold;">/add-one</span> [ op ( add t 1 . ) <span style="color: #0084C8; font-weight: bold;">/t</span> . ] .
... add-one 5 .
ans = 6
... set <span style="color: #0084C8; font-weight: bold;">/add-one</span> <span style="color: #00578E; font-weight: bold;">&lt;</span> ( add t 1 . ) <span style="color: #0084C8; font-weight: bold;">/t</span> <span style="color: #00578E; font-weight: bold;">&gt;</span> .
... add-one 5 .
ans = 6
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga6234aa" class="outline-2">
<h2 id="orga6234aa"><span class="section-number-2">7</span> Booleans and Control Flow</h2>
<div class="outline-text-2" id="text-7">
<p>
<code>if</code>
</p>

<p>
<code>while</code>
</p>

<p>
<code>is-type</code>
</p>

<p>
<code>and=/=or=/=not</code>
</p>
</div>
</div>

<div id="outline-container-org09e8301" class="outline-2">
<h2 id="org09e8301"><span class="section-number-2">8</span> Numbers</h2>
</div>
<div id="outline-container-orgd662040" class="outline-2">
<h2 id="orgd662040"><span class="section-number-2">9</span> Strings</h2>
</div>
<div id="outline-container-orgb929db8" class="outline-2">
<h2 id="orgb929db8"><span class="section-number-2">10</span> Tasks (multi-threading)</h2>
</div>
<div id="outline-container-orgfd266dc" class="outline-2">
<h2 id="orgfd266dc"><span class="section-number-2">11</span> Examples</h2>
<div class="outline-text-2" id="text-11">
</div>
<div id="outline-container-org5e04e0d" class="outline-3">
<h3 id="org5e04e0d"><span class="section-number-3">11.1</span> Short Examples</h3>
</div>

<div id="outline-container-orgff06346" class="outline-3">
<h3 id="orgff06346"><span class="section-number-3">11.2</span> Complete Program</h3>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Zach Flynn</p>
<p class="date">Created: 2020-08-12 Wed 13:13</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
