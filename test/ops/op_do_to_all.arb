#!./arbel -c
source "src/library/assert.arb" .
error-messages False .

print "Start <do-to-all> test." .

' Tests with correct usage

set /x [ do-to-all ( add t 1 . ) [ list 1 2 3 . ] . ] .
assert /test ( eq x:/#1 2 . ) .
assert /test ( eq x:/#2 3 . ) .
assert /test ( eq x:/#3 4 . ) .

' Test with wrong argument type

assert /test ( is-error ( do-to-all ( add s 1 . ) [ list 1 2 3 . ] . ) .
             ) .

assert /test ( is-error ( do-to-all add [ list 1 2 3 . ] . ) . ) .

' Test with incorrect number of arguments

assert /test ( is-error ( do-to-all . ) . ) .
assert /test ( is-error ( do-to-all ( add t 1 . ) . ) . ) .

print "Finished <do-to-all> test." .

